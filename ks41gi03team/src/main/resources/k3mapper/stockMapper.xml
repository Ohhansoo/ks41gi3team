<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="k3.stock.ahs.mapper.K3StockMapper">
	<resultMap type="K3Stock" id="warehousingResultMap">
 		<result column="laydownCheckCode" property="laydownCheckCode" />
 		<result column="laydownGoodsName" property="laydownGoodsName" />
		<result column="COUNT" property="COUNT" />
		<result column="contractorName" property="contractorName" />
		<result column="largeCategory" property="largeCategory" />
		<result column="mediumCategory" property="mediumCategory" />
		<result column="smallCategory" property="smallCategory" />
		<result column="locationCode" property="locationCode" />
		<result column="sortingDate" property="sortingDate" />
		<result column="sortingManagerName" property="sortingManagerName" />
	</resultMap>

	<select id="k3GetAllowStock" resultType="K3Stock">
		SELECT
			w.laydownCheckCode,
			w.laydownGoodsName,
			g.COUNT,
			c.contractorName,
			t.largeCategory,
			t.mediumCategory,
			t.smallCategory,
			w.locationCode,
			w.sortingDate,
			m.memberName AS sortingManagerName
		FROM
			k3_tb_pileup AS p
			INNER JOIN
			k3_tb_warehousing AS w
			ON
			p.warehousingCode = w.warehousingCode
			INNER JOIN
			k3_tb_contractor_staff AS c
			ON
			p.contractorId = c.contractorId
			INNER JOIN
			k3_tb_assort_goods AS g
			ON
			p.assortCode = g.assortCode
			INNER JOIN
			k3_tb_total_category AS t
			ON
			w.categoryCode = t.categoryCode
			INNER JOIN
			k3_tb_member AS m
			ON
			w.sortingManager = m.memberId
	</select>

</mapper>