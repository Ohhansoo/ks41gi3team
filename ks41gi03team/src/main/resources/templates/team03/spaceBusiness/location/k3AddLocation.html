<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="@{layout/default}">
	<th:block layout:fragment="customTitle">
		<title th:text="title"></title>
	</th:block>
		
	<th:block layout:fragment="customContents">
		<script type="text/javascript">
			$(function(){
				$(document).on('click','#addLocationBtn',function(){
					var centerCode = $('input:text[name=centerCode]').val();
					var brandCode = $('input:text[name=brandCode]').val();
					var lineCode = $('input:text[name=lineCode]').val();
					var	rackCode = $('input:text[name=rackCode]').val();
					var cellCode = $('input:text[name=cellCode]').val();
					var locationNote = $('input:hidden[name=locationNote]').val();
					var locationState = $('input:hidden[name=locationState]').val();
					var centerCodeList = centerCode.split(",");
					var brandCodeList = brandCode.split(",");
					var lineCodeList = lineCode.split(",");
					var rackCodeList = rackCode.split(",");
					var cellCodeList = cellCode.split(",");
					var locationCode = [];
					if(centerCodeList != '' && brandCodeList != '' && lineCodeList != '' && rackCodeList != '' && cellCode != ''){
						for (var i = 0; i < centerCodeList.length; i++) {
							for (var j = 0; j < brandCodeList.length; j++) {
								for (var k = 0; k < lineCodeList.length; k++) {
									for (var l = 0; l < rackCodeList.length; l++) {
										for (var g = 0; g < cellCodeList.length; g++) {
											var allCode = centerCodeList[i] + brandCodeList[j] + "-" + lineCodeList[k] + "-"
														  + rackCodeList[l] + "-" + cellCodeList[g];
											var jsonObj = {};
											jsonObj['locationCode'] = allCode;
											jsonObj['locationNote'] = locationNote;
											jsonObj['locationState'] = locationState;
											locationCode.push(jsonObj);
										}
									}
								}
							}
						}	
					}
					if(centerCodeList == '' && brandCodeList != '' && lineCodeList != '' && rackCodeList != '' && cellCode != ''){
						for (var j = 0; j < brandCodeList.length; j++) {
							for (var k = 0; k < lineCodeList.length; k++) {
								for (var l = 0; l < rackCodeList.length; l++) {
									for (var g = 0; g < cellCodeList.length; g++) {
										var allCode = brandCodeList[j] + "-" + lineCodeList[k] + "-"
														  + rackCodeList[l] + "-" + cellCodeList[g];
										var jsonObj = {};
										jsonObj['locationCode'] = allCode;
										jsonObj['locationNote'] = locationNote;
										jsonObj['locationState'] = locationState;
										locationCode.push(jsonObj);	
									}
								}
							}
						}
					}
					if(centerCodeList == '' && brandCodeList == '' && lineCodeList != '' && rackCodeList != '' && cellCode != ''){
						for (var k = 0; k < lineCodeList.length; k++) {
							for (var l = 0; l < rackCodeList.length; l++) {
								for (var g = 0; g < cellCodeList.length; g++) {
									var allCode =  lineCodeList[k] + "-" + rackCodeList[l] + "-" + cellCodeList[g];	
									var jsonObj = {};
									jsonObj['locationCode'] = allCode;
									jsonObj['locationNote'] = locationNote;
									jsonObj['locationState'] = locationState;
									locationCode.push(jsonObj);
								}
							}
						}	
					}
					console.log(JSON.stringify(locationCode)); 
		
					var request = $.ajax({
									type : 'POST',
									url : '/team03/spaceBusiness/location/k3AddLocation',
									data : JSON.stringify(locationCode),
									contentType : 'application/json; charset=utf-8',
									dataType : 'text'
					});
					request.done(function(data) {			
							location.href = "/team03/spaceBusiness/location/k3LocationList";

					});
					request.fail(function(r) {
						console.log(r);
							alert('중복된값이나 입력된 값이 없습니다.');
					});
					
					
				});
				
				
			});
			 
		</script>
		<div id="representative-button">
			<div id="representative-button">			
					<!-- 콘텐츠 콘테이너 시작 -->
				<div class="container-fluid">	
						<!-- card header Start -->
					<div class="card">
						<div class="row">
							<div class="col-md-12">
								<div class="card-header">
									<div class="card-title">로케이션 등록</div>
								</div>
								<div>
									<div class="card-body">
										<form id="addLocationForm"th:action="@{/team03/spaceBusiness/location/k3AddLocation}" method="post">
											<div class="col-md-4">
												<div class="form-group">
													<label for="centerCode">센터코드</label>
													<input type="text" class="form-control" id="centerCode" name="centerCode" placeholder="예)A,B,C.."/>
												</div>
												<div class="form-group">
													<label for="brandCode">구역코드</label>
													<input type="text" class="form-control" id="brandCode" name="brandCode" placeholder="예)1,2,3.."/>
												</div>
												<div class="form-group">
													<label for="lineCode">라인코드</label>
													<input type="text" class="form-control" id="lineCode" name="lineCode" placeholder="예)A1,B1,C1"/>
												</div>
												<div class="form-group">
													<label for="rackCode">렉 코드</label>
													<input type="text" class="form-control" id="rackCode" name="rackCode" placeholder="예)1,2,3"/>
												</div>
												<div class="form-group">
													<label for="cellCode">셀 코드</label>
													<input type="text" class="form-control" id="cellCode" name="cellCode" placeholder="예)11 = 1단1열 11,22,33,44"/>
												</div>
												<div class="form-group">
													<label for="locationNote"></label>
													<input type="hidden" class="form-control" id="locationNote" name="locationNote" value="없음"/>
												</div>
												<div class="form-group">
													<label for="locationState"></label>
													<input type="hidden" class="form-control" id="locationState" name="locationState" value="비었음"/>
												</div>
												<div class="card-footer">
													<button type="button" id="addLocationBtn" class="btn btn-block btn-outlin-info">등록</button>
												</div>	
											</div>
										</form>
									</div>
								</div>	
							</div>
						</div>					
					</div>
					<div class="card">
						<div class="row">
							<div class="col-12">
						<!-- card header Start -->
								<div class="card-header">
									<div class="card-title">타이틀</div>
								</div>
						<!-- card header End -->
						<!-- card body Start -->	
								<div class="card-body-p0">
									<div class="mailbox-controls">
										<!-- <button type="button" class="btn btn-default btn-sm checkbox-toggle">
											<i class="far fa-square"></i> -->
											<!-- 클릭이벤트 아래의 버튼이미지로 바꿈 -->
									   <!-- <i class="far fa-check-square"></i> -->												
										<button type="button" class="btn btn-default btn-sm">
											<i class="fas fa-trash">삭제</i>
										</button>
										<button type="button" class="btn btn-default btn-sm">
											<i class="fas fa-print">출력</i>
										</button>
										<button type="button" class="btn btn-default btn-sm">
											<i class="fas fa-share">등록</i>
										</button>
										<div class="float-right">
											<div class="input-group input-group-sm">
												<select class="form-control-sm">
													<option value="">호호</option>
													<option value="">하하</option>
													<option value="">흐흐</option>
													<option value="">히히</option>
												</select>
												<input type="text" class="form-control" placeholder="검색">
												<div class="input-group-append">
													<div class="btn btn-default">
														<i class="fas fa-search"></i>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="table-responsive mailbox-messages">
										<table class="table table-holder mailbox-messages">
											<thead>
												<tr>
													<th>
														<button type="button" class="btn btn-default btn-sm checkbox-toggle">
															<i class="far fa-square"></i>
														</button>
													</th>	
													<th>수정</th>
													<th>로케이션코드</th>
													<th>비고</th>
													<th>상태</th>
												</tr>
											</thead>
											<tbody>
												<tr th:if="${not #lists.isEmpty(locationData)}" th:each="ld :${locationData}">
													<td>
														<div class="icheck-primary">
															<input type="checkbox" id="check1"/>
															<label for="check1"></label>
														</div>
													</td>
													<td>
														<button type="button" class="btn btn-default btn-sm">
  															<i class="fas fa-pencil-alt">수정</i>
														</button>
													</td>
													<td th:text="${ld.locationCode}"></td>
													<td th:text="${ld.locationNote}"></td>
													<td th:text="${ld.locationState}"></td>
												</tr>
											</tbody>
										</table>
									</div>		
								</div>
						<!-- card body End -->								
							</div>
						</div>		
					</div>	
				</div>
			</div>
		</div>	
	</th:block>
</head>